#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Pre-commit hook for Linkart
echo "ğŸš€ ExÃ©cution des vÃ©rifications pre-commit..."

# ExÃ©cuter les vÃ©rifications rapides
node scripts/pre-commit-checks.js

# GÃ©nÃ©rer la documentation si nÃ©cessaire
echo "ğŸ“ VÃ©rification de la documentation..."
if git diff --cached --name-only | grep -E '\.(ts|tsx|js|jsx)$' > /dev/null; then
  echo "ğŸ”„ GÃ©nÃ©ration automatique de la documentation..."
  npm run docs:generate
  if [ -n "$(git status --porcelain docs/generated/)" ]; then
    echo "ğŸ“„ Documentation mise Ã  jour, ajout des fichiers gÃ©nÃ©rÃ©s..."
    git add docs/generated/
  fi
fi

# ExÃ©cuter lint-staged pour les fichiers modifiÃ©s
npx lint-staged